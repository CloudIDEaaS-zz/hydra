// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 16.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace AbstraX.Generators.Server.WebAPIController
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using Utils;
    using AbstraX.Generators;
    using AbstraX.Angular;
    using AbstraX.DataAnnotations;
    using AbstraX;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "16.0.0.0")]
    public partial class WebAPIControllerClassTemplate : AbstraX.Generators.Base.TemplateBase
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            
            #line 23 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

    var entityVariable = this.EntityName.ToCamelCase();
    var containerSetVariable = this.ContainerSet.ToCamelCase();
    var containerInterface = this.Container.Name.Prepend("I");
    var containerVariable = this.Container.Name.ToCamelCase();
    var lambdaParameter = containerVariable.Left(1);

            
            #line default
            #line hidden
            this.Write("using ");
            
            #line 30 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.RootNamespace));
            
            #line default
            #line hidden
            this.Write(".Entities;\r\nusing ");
            
            #line 31 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.RootNamespace));
            
            #line default
            #line hidden
            this.Write(".Services.Models;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System" +
                    ".Data.Entity;\r\nusing System.Linq;\r\nusing System.Net;\r\nusing System.Net.Http;\r\nus" +
                    "ing System.Web.Http;\r\nusing System.Web.Http.Cors;\r\nusing Microsoft.AspNet.Identi" +
                    "ty;\r\nusing ");
            
            #line 41 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 41 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.RootNamespace));
            
            #line default
            #line hidden
            this.Write(".Services.Models.");
            
            #line 41 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 42 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

    if (this.CustomQueries != null)
    {
        foreach (var query in this.CustomQueries)
        {

            
            #line default
            #line hidden
            this.Write("using ");
            
            #line 48 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(query.ServiceControllerMethodReturnType));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 48 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.RootNamespace));
            
            #line default
            #line hidden
            this.Write(".Services.Models.");
            
            #line 48 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(query.ServiceControllerMethodReturnType));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 49 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

        }
    }

            
            #line default
            #line hidden
            this.Write("\r\nnamespace ");
            
            #line 54 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.RootNamespace));
            
            #line default
            #line hidden
            this.Write(".Services.Controllers\r\n{\r\n    [HostAuthentication(DefaultAuthenticationTypes.Exte" +
                    "rnalBearer)]\r\n    public class ");
            
            #line 57 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ControllerName));
            
            #line default
            #line hidden
            this.Write("Controller : ApiController\r\n    {\r\n        private ");
            
            #line 59 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerInterface));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 59 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n        public ");
            
            #line 61 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ControllerName));
            
            #line default
            #line hidden
            this.Write("Controller(");
            
            #line 61 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerInterface));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 61 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            this.");
            
            #line 63 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 63 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(";\r\n        }\r\n\r\n");
            
            #line 66 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

    if (this.CustomQueries != null)
    {
        foreach (var query in this.CustomQueries)
        {
            var queryEntityProperties = query.GetEntityProperties<Generators.EntityProperty>();
            var queryCode = query.QueryExpression.Replace(new Dictionary<string, string> { { "containerVariable", containerVariable }, { "identityName", "userName" } });
            var queryPropertyVariable = query.QueryEntityName.ToCamelCase();

            
            #line default
            #line hidden
            this.Write("        [Route(\"~/api/");
            
            #line 75 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(query.ClientProviderMethodName));
            
            #line default
            #line hidden
            this.Write("\")]\r\n        [HttpGet]\r\n        public ");
            
            #line 77 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(query.ServiceControllerMethodReturnType));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 77 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(query.ServiceControllerMethodName));
            
            #line default
            #line hidden
            this.Write("()\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;" +
                    "\r\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                va" +
                    "r userName = identity.Name;\r\n                var ");
            
            #line 84 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(queryPropertyVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 84 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(queryCode));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                return new ");
            
            #line 86 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(query.ServiceControllerMethodReturnType));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 88 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            foreach (var entityProperty in queryEntityProperties)
            {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 92 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 92 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(queryPropertyVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 92 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 93 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            }

            
            #line default
            #line hidden
            this.Write("                };\r\n            }\r\n            else\r\n            {\r\n             " +
                    "   throw new UnauthorizedAccessException();\r\n            }\r\n        }\r\n");
            
            #line 103 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

        }
    }

    foreach (var relatedEntity in this.RelatedEntities)
    {
        var property = relatedEntity.Name;
        var propertyVariable = relatedEntity.Name.ToCamelCase();
        var sortBy = relatedEntity.SortBy;
        var sortDirection = relatedEntity.SortDirection;

        if (relatedEntity.IsEntitySet)
        {

            
            #line default
            #line hidden
            this.Write("\r\n        [HttpGet]\r\n        [Route(\"~/api/");
            
            #line 119 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write("\")]\r\n        public ");
            
            #line 120 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("[] Get");
            
            #line 120 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property));
            
            #line default
            #line hidden
            this.Write("()\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;" +
                    "\r\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                va" +
                    "r ");
            
            #line 126 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 126 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 126 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                return ");
            
            #line 128 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write(".Select(");
            
            #line 128 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => new ");
            
            #line 128 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 130 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 134 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 134 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 134 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 135 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            }

            if (sortDirection == SortDirection.Ascending)
            {

            
            #line default
            #line hidden
            this.Write("                }).OrderBy(c => c.");
            
            #line 141 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(sortBy));
            
            #line default
            #line hidden
            this.Write(").ToArray();\r\n");
            
            #line 142 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            }
            else
            {

            
            #line default
            #line hidden
            this.Write("                }).OrderByDescending(c => c.");
            
            #line 147 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(sortBy));
            
            #line default
            #line hidden
            this.Write(").ToArray();\r\n");
            
            #line 148 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            }

            
            #line default
            #line hidden
            this.Write("            }\r\n            else\r\n            {\r\n                throw new Unautho" +
                    "rizedAccessException();\r\n            }\r\n        }\r\n\r\n");
            
            #line 158 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

        }
        else
        {
            var parentRefName = relatedEntity.EntityParentRef.Name;
            var parentRefVariableName = parentRefName.ToCamelCase();
            var propertyRefVariableName = relatedEntity.ThisPropertyRef.Name.ToCamelCase();
            var scriptType = relatedEntity.ThisPropertyRefScriptType;
            var shortType = relatedEntity.ThisPropertyRefShortType;
            var containerSetName = relatedEntity.ContainerSet.Name;


            
            #line default
            #line hidden
            this.Write("        [Route(\"~/api/");
            
            #line 170 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetName));
            
            #line default
            #line hidden
            this.Write("/{");
            
            #line 170 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyRefVariableName));
            
            #line default
            #line hidden
            this.Write(":");
            
            #line 170 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(shortType.ToLower()));
            
            #line default
            #line hidden
            this.Write("}/");
            
            #line 170 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property.ToLower()));
            
            #line default
            #line hidden
            this.Write("\")]\r\n        [HttpGet]\r\n        public ");
            
            #line 172 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("[] Get");
            
            #line 172 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property));
            
            #line default
            #line hidden
            this.Write("For");
            
            #line 172 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(parentRefName));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 172 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(shortType));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 172 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyRefVariableName));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;\r" +
                    "\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                var" +
                    " ");
            
            #line 178 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 178 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 178 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                return ");
            
            #line 180 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write(".Where(");
            
            #line 180 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 180 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 180 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(relatedEntity.ThisPropertyRef.Name));
            
            #line default
            #line hidden
            this.Write(" == ");
            
            #line 180 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyRefVariableName));
            
            #line default
            #line hidden
            this.Write(").Select(");
            
            #line 180 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => new ");
            
            #line 180 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 182 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 186 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 186 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 186 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 187 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            }

            if (sortDirection == SortDirection.Ascending)
            {

            
            #line default
            #line hidden
            this.Write("                }).OrderBy(");
            
            #line 193 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 193 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 193 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(sortBy));
            
            #line default
            #line hidden
            this.Write(").ToArray();\r\n");
            
            #line 194 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            }
            else
            {

            
            #line default
            #line hidden
            this.Write("                }).OrderByDescending(");
            
            #line 199 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 199 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 199 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(sortBy));
            
            #line default
            #line hidden
            this.Write(").ToArray();\r\n");
            
            #line 200 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            }

            
            #line default
            #line hidden
            this.Write("            }\r\n            else\r\n            {\r\n                throw new Unautho" +
                    "rizedAccessException();\r\n            }\r\n        }\r\n");
            
            #line 209 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

        }
    }

            
            #line default
            #line hidden
            this.Write("\r\n        [HttpGet]\r\n        [Route(\"~/api/");
            
            #line 215 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write("/{id:");
            
            #line 215 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyType.ToLower()));
            
            #line default
            #line hidden
            this.Write("}\")]\r\n        public ");
            
            #line 216 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" Get");
            
            #line 216 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 216 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyType));
            
            #line default
            #line hidden
            this.Write(" id)\r\n        {\r\n            var identity = this.RequestContext.Principal.Identit" +
                    "y;\r\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                " +
                    "var ");
            
            #line 222 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 222 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 222 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                return ");
            
            #line 224 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Where(");
            
            #line 224 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 224 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 224 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyName));
            
            #line default
            #line hidden
            this.Write(" == id).Select(");
            
            #line 224 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => new ");
            
            #line 224 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 226 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 230 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 230 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 230 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 231 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            }

            
            #line default
            #line hidden
            this.Write("                }).Single();\r\n            }\r\n            else\r\n            {\r\n   " +
                    "             throw new UnauthorizedAccessException();\r\n            }\r\n        }\r" +
                    "\n\r\n        [HttpPost]\r\n        public void Create");
            
            #line 243 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 243 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 243 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;\r" +
                    "\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                var" +
                    " ");
            
            #line 249 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 249 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 249 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                ");
            
            #line 251 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Add(new Entities.");
            
            #line 251 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 253 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {
                if (entityProperty.IsKey)
                {
                    if (entityProperty.DataType == "Guid")
                    {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 261 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = Guid.NewGuid(),\r\n");
            
            #line 262 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

                    }
                }
                else
                {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 268 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 268 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 268 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 269 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

                }
            }

            
            #line default
            #line hidden
            this.Write("                });\r\n\r\n                ");
            
            #line 275 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".SaveChanges();\r\n            }\r\n            else\r\n            {\r\n                " +
                    "throw new UnauthorizedAccessException();\r\n            }\r\n        }\r\n\r\n        [H" +
                    "ttpPut]\r\n        public void Update");
            
            #line 284 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 284 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 284 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;\r" +
                    "\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                var" +
                    " update");
            
            #line 290 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 290 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 290 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(".Single(");
            
            #line 290 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 290 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 290 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyName));
            
            #line default
            #line hidden
            this.Write(" == ");
            
            #line 290 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 290 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyName));
            
            #line default
            #line hidden
            this.Write(");\r\n\r\n");
            
            #line 292 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {
                if (!entityProperty.IsKey)
                {

            
            #line default
            #line hidden
            this.Write("                update");
            
            #line 298 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 298 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 298 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 298 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 299 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

                }
            }

            
            #line default
            #line hidden
            this.Write("\r\n                ");
            
            #line 304 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".SaveChanges();\r\n            }\r\n            else\r\n            {\r\n                " +
                    "throw new UnauthorizedAccessException();\r\n            }\r\n        }\r\n\r\n        [H" +
                    "ttpDelete]\r\n        public void Delete");
            
            #line 313 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 313 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyType));
            
            #line default
            #line hidden
            this.Write(" id)\r\n        {\r\n            var identity = this.RequestContext.Principal.Identit" +
                    "y;\r\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                " +
                    "var ");
            
            #line 319 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 319 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 319 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(";\r\n                var delete");
            
            #line 320 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 320 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Single(");
            
            #line 320 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 320 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 320 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyName));
            
            #line default
            #line hidden
            this.Write(" == id);\r\n\r\n                ");
            
            #line 322 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Remove(delete");
            
            #line 322 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(");\r\n\r\n                ");
            
            #line 324 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".SaveChanges();\r\n            }\r\n            else\r\n            {\r\n                " +
                    "throw new UnauthorizedAccessException();\r\n            }\r\n        }\r\n    }\r\n}\r\n");
            return this.GenerationEnvironment.ToString();
        }
        
        #line 1 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIControllerClassTemplate.tt"

private global::System.EventHandler _DebugCallbackField;

/// <summary>
/// Access the DebugCallback parameter of the template.
/// </summary>
private global::System.EventHandler DebugCallback
{
    get
    {
        return this._DebugCallbackField;
    }
}

private global::System.Collections.Generic.List<RelatedEntity> _RelatedEntitiesField;

/// <summary>
/// Access the RelatedEntities parameter of the template.
/// </summary>
private global::System.Collections.Generic.List<RelatedEntity> RelatedEntities
{
    get
    {
        return this._RelatedEntitiesField;
    }
}

private global::System.Collections.Generic.IEnumerable<AbstraX.QueryInfo> _CustomQueriesField;

/// <summary>
/// Access the CustomQueries parameter of the template.
/// </summary>
private global::System.Collections.Generic.IEnumerable<AbstraX.QueryInfo> CustomQueries
{
    get
    {
        return this._CustomQueriesField;
    }
}

private global::System.Collections.Generic.List<Generators.EntityProperty> _EntityPropertiesField;

/// <summary>
/// Access the EntityProperties parameter of the template.
/// </summary>
private global::System.Collections.Generic.List<Generators.EntityProperty> EntityProperties
{
    get
    {
        return this._EntityPropertiesField;
    }
}

private string _ControllerNameField;

/// <summary>
/// Access the ControllerName parameter of the template.
/// </summary>
private string ControllerName
{
    get
    {
        return this._ControllerNameField;
    }
}

private string _EntityNameField;

/// <summary>
/// Access the EntityName parameter of the template.
/// </summary>
private string EntityName
{
    get
    {
        return this._EntityNameField;
    }
}

private string _KeyTypeField;

/// <summary>
/// Access the KeyType parameter of the template.
/// </summary>
private string KeyType
{
    get
    {
        return this._KeyTypeField;
    }
}

private string _KeyNameField;

/// <summary>
/// Access the KeyName parameter of the template.
/// </summary>
private string KeyName
{
    get
    {
        return this._KeyNameField;
    }
}

private string _RootNamespaceField;

/// <summary>
/// Access the RootNamespace parameter of the template.
/// </summary>
private string RootNamespace
{
    get
    {
        return this._RootNamespaceField;
    }
}

private string _ContainerSetField;

/// <summary>
/// Access the ContainerSet parameter of the template.
/// </summary>
private string ContainerSet
{
    get
    {
        return this._ContainerSetField;
    }
}

private global::AbstraX.ServerInterfaces.IElement _ContainerField;

/// <summary>
/// Access the Container parameter of the template.
/// </summary>
private global::AbstraX.ServerInterfaces.IElement Container
{
    get
    {
        return this._ContainerField;
    }
}


/// <summary>
/// Initialize the template
/// </summary>
public override void Initialize()
{
    base.Initialize();
    if ((this.Errors.HasErrors == false))
    {
bool DebugCallbackValueAcquired = false;
if (this.Session.ContainsKey("DebugCallback"))
{
    this._DebugCallbackField = ((global::System.EventHandler)(this.Session["DebugCallback"]));
    DebugCallbackValueAcquired = true;
}
if ((DebugCallbackValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("DebugCallback");
    if ((data != null))
    {
        this._DebugCallbackField = ((global::System.EventHandler)(data));
    }
}
bool RelatedEntitiesValueAcquired = false;
if (this.Session.ContainsKey("RelatedEntities"))
{
    this._RelatedEntitiesField = ((global::System.Collections.Generic.List<RelatedEntity>)(this.Session["RelatedEntities"]));
    RelatedEntitiesValueAcquired = true;
}
if ((RelatedEntitiesValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("RelatedEntities");
    if ((data != null))
    {
        this._RelatedEntitiesField = ((global::System.Collections.Generic.List<RelatedEntity>)(data));
    }
}
bool CustomQueriesValueAcquired = false;
if (this.Session.ContainsKey("CustomQueries"))
{
    this._CustomQueriesField = ((global::System.Collections.Generic.IEnumerable<AbstraX.QueryInfo>)(this.Session["CustomQueries"]));
    CustomQueriesValueAcquired = true;
}
if ((CustomQueriesValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("CustomQueries");
    if ((data != null))
    {
        this._CustomQueriesField = ((global::System.Collections.Generic.IEnumerable<AbstraX.QueryInfo>)(data));
    }
}
bool EntityPropertiesValueAcquired = false;
if (this.Session.ContainsKey("EntityProperties"))
{
    this._EntityPropertiesField = ((global::System.Collections.Generic.List<Generators.EntityProperty>)(this.Session["EntityProperties"]));
    EntityPropertiesValueAcquired = true;
}
if ((EntityPropertiesValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("EntityProperties");
    if ((data != null))
    {
        this._EntityPropertiesField = ((global::System.Collections.Generic.List<Generators.EntityProperty>)(data));
    }
}
bool ControllerNameValueAcquired = false;
if (this.Session.ContainsKey("ControllerName"))
{
    this._ControllerNameField = ((string)(this.Session["ControllerName"]));
    ControllerNameValueAcquired = true;
}
if ((ControllerNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("ControllerName");
    if ((data != null))
    {
        this._ControllerNameField = ((string)(data));
    }
}
bool EntityNameValueAcquired = false;
if (this.Session.ContainsKey("EntityName"))
{
    this._EntityNameField = ((string)(this.Session["EntityName"]));
    EntityNameValueAcquired = true;
}
if ((EntityNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("EntityName");
    if ((data != null))
    {
        this._EntityNameField = ((string)(data));
    }
}
bool KeyTypeValueAcquired = false;
if (this.Session.ContainsKey("KeyType"))
{
    this._KeyTypeField = ((string)(this.Session["KeyType"]));
    KeyTypeValueAcquired = true;
}
if ((KeyTypeValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("KeyType");
    if ((data != null))
    {
        this._KeyTypeField = ((string)(data));
    }
}
bool KeyNameValueAcquired = false;
if (this.Session.ContainsKey("KeyName"))
{
    this._KeyNameField = ((string)(this.Session["KeyName"]));
    KeyNameValueAcquired = true;
}
if ((KeyNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("KeyName");
    if ((data != null))
    {
        this._KeyNameField = ((string)(data));
    }
}
bool RootNamespaceValueAcquired = false;
if (this.Session.ContainsKey("RootNamespace"))
{
    this._RootNamespaceField = ((string)(this.Session["RootNamespace"]));
    RootNamespaceValueAcquired = true;
}
if ((RootNamespaceValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("RootNamespace");
    if ((data != null))
    {
        this._RootNamespaceField = ((string)(data));
    }
}
bool ContainerSetValueAcquired = false;
if (this.Session.ContainsKey("ContainerSet"))
{
    this._ContainerSetField = ((string)(this.Session["ContainerSet"]));
    ContainerSetValueAcquired = true;
}
if ((ContainerSetValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("ContainerSet");
    if ((data != null))
    {
        this._ContainerSetField = ((string)(data));
    }
}
bool ContainerValueAcquired = false;
if (this.Session.ContainsKey("Container"))
{
    this._ContainerField = ((global::AbstraX.ServerInterfaces.IElement)(this.Session["Container"]));
    ContainerValueAcquired = true;
}
if ((ContainerValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("Container");
    if ((data != null))
    {
        this._ContainerField = ((global::AbstraX.ServerInterfaces.IElement)(data));
    }
}


    }
}


        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
}

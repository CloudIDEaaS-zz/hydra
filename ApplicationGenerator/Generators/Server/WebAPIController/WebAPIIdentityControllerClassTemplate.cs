// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 16.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace AbstraX.Generators.Server.WebAPIController
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using Utils;
    using AbstraX.Generators;
    using AbstraX.Angular;
    using AbstraX.DataAnnotations;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "16.0.0.0")]
    public partial class WebAPIIdentityControllerClassTemplate : AbstraX.Generators.Base.TemplateBase
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            
            #line 20 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

    var entityVariable = this.EntityName.ToCamelCase();
    var containerSetVariable = this.ContainerSet.ToCamelCase();
    var containerInterface = this.Container.Name.Prepend("I");
    var containerVariable = this.Container.Name.ToCamelCase();
    var lambdaParameter = containerVariable.Left(1);
    var userPasswordField = this.EntityProperties.GetIdentityField(IdentityFieldKind.PasswordHash);

            
            #line default
            #line hidden
            this.Write(@"using Ripley.Entities;
using Ripley.Services.Models;
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;
using System.Web.Http.Cors;
using Microsoft.AspNet.Identity;
using ");
            
            #line 39 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" = Ripley.Services.Models.");
            
            #line 39 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\nnamespace Ripley.Services.Controllers\r\n{\r\n    [Authorize(Roles = \"User\")]\r\n " +
                    "   [HostAuthentication(DefaultAuthenticationTypes.ExternalBearer)]\r\n    public c" +
                    "lass ");
            
            #line 45 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ControllerName));
            
            #line default
            #line hidden
            this.Write("Controller : ApiController\r\n    {\r\n        private ");
            
            #line 47 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerInterface));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 47 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n        public ");
            
            #line 49 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ControllerName));
            
            #line default
            #line hidden
            this.Write("Controller(");
            
            #line 49 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerInterface));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 49 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            this.");
            
            #line 51 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 51 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(";\r\n        }\r\n\r\n");
            
            #line 54 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

    foreach (var relatedEntity in this.RelatedEntities)
    {
        var property = relatedEntity.Name;
        var propertyVariable = relatedEntity.Name.ToCamelCase();
        var sortBy = relatedEntity.SortBy;
        var sortDirection = relatedEntity.SortDirection;

        if (relatedEntity.IsEntitySet)
        {

            
            #line default
            #line hidden
            this.Write("        [HttpGet]\r\n        [Route(\"~/api/");
            
            #line 66 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write("\")]\r\n        public Models.Client");
            
            #line 67 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("[] Get");
            
            #line 67 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property));
            
            #line default
            #line hidden
            this.Write("()\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;" +
                    "\r\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                va" +
                    "r ");
            
            #line 73 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 73 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 73 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                return ");
            
            #line 75 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write(".Select(");
            
            #line 75 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => new ");
            
            #line 75 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 77 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 81 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 81 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 81 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 82 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            }

            if (sortDirection == SortDirection.Ascending)
            {

            
            #line default
            #line hidden
            this.Write("                }).OrderBy(c => c.");
            
            #line 88 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(sortBy));
            
            #line default
            #line hidden
            this.Write(").ToArray();\r\n");
            
            #line 89 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            }
            else
            {

            
            #line default
            #line hidden
            this.Write("                }).OrderByDescending(c => c.");
            
            #line 94 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(sortBy));
            
            #line default
            #line hidden
            this.Write(").ToArray();\r\n");
            
            #line 95 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            }

            
            #line default
            #line hidden
            this.Write("            }\r\n            else\r\n            {\r\n                throw new Unautho" +
                    "rizedAccessException();\r\n            }\r\n        }\r\n\r\n");
            
            #line 105 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

        }
        else
        {
            var parentRefName = relatedEntity.EntityParentRef.Name;
            var parentRefVariableName = parentRefName.ToCamelCase();
            var propertyRefVariableName = relatedEntity.ThisPropertyRef.Name.ToCamelCase();
            var scriptType = relatedEntity.ThisPropertyRefScriptType;
            var shortType = relatedEntity.ThisPropertyRefShortType;
            var containerSetName = relatedEntity.ContainerSet.Name;


            
            #line default
            #line hidden
            this.Write("        [Route(\"~/api/");
            
            #line 117 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetName));
            
            #line default
            #line hidden
            this.Write("/{");
            
            #line 117 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyRefVariableName));
            
            #line default
            #line hidden
            this.Write(":");
            
            #line 117 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(shortType.ToLower()));
            
            #line default
            #line hidden
            this.Write("}/");
            
            #line 117 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property.ToLower()));
            
            #line default
            #line hidden
            this.Write("\")]\r\n        [HttpGet]\r\n        public Models.");
            
            #line 119 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("[] Get");
            
            #line 119 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property));
            
            #line default
            #line hidden
            this.Write("For");
            
            #line 119 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(parentRefName));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 119 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(shortType));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 119 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyRefVariableName));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;\r" +
                    "\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                var" +
                    " ");
            
            #line 125 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 125 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 125 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(property));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                return ");
            
            #line 127 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyVariable));
            
            #line default
            #line hidden
            this.Write(".Where(");
            
            #line 127 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 127 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 127 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(relatedEntity.ThisPropertyRef.Name));
            
            #line default
            #line hidden
            this.Write(" == ");
            
            #line 127 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(propertyRefVariableName));
            
            #line default
            #line hidden
            this.Write(").Select(");
            
            #line 127 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => new ");
            
            #line 127 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 129 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 133 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 133 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 133 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 134 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            }

            if (sortDirection == SortDirection.Ascending)
            {

            
            #line default
            #line hidden
            this.Write("                }).OrderBy(");
            
            #line 140 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 140 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 140 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(sortBy));
            
            #line default
            #line hidden
            this.Write(").ToArray();\r\n");
            
            #line 141 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            }
            else
            {

            
            #line default
            #line hidden
            this.Write("                }).OrderByDescending(");
            
            #line 146 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 146 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 146 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(sortBy));
            
            #line default
            #line hidden
            this.Write(").ToArray();\r\n");
            
            #line 147 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            }

            
            #line default
            #line hidden
            this.Write("            }\r\n            else\r\n            {\r\n                throw new Unautho" +
                    "rizedAccessException();\r\n            }\r\n        }\r\n");
            
            #line 156 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

        }
    }

            
            #line default
            #line hidden
            this.Write("\r\n        [HttpGet]\r\n        [Route(\"~/api/");
            
            #line 162 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write("/{id:");
            
            #line 162 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyType.ToLower()));
            
            #line default
            #line hidden
            this.Write("}\")]\r\n        public Models.Client");
            
            #line 163 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" Get");
            
            #line 163 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 163 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyType));
            
            #line default
            #line hidden
            this.Write(" id)\r\n        {\r\n            var identity = this.RequestContext.Principal.Identit" +
                    "y;\r\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                " +
                    "var ");
            
            #line 169 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 169 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 169 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                return ");
            
            #line 171 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Where(");
            
            #line 171 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 171 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 171 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyName));
            
            #line default
            #line hidden
            this.Write(" == id).Select(");
            
            #line 171 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => new Models.Client");
            
            #line 171 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 173 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {
                if (entityProperty != userPasswordField)
                {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 179 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 179 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 179 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 180 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

                }
            }

            
            #line default
            #line hidden
            this.Write(@"                }).Single();
            }
            else
            {
                throw new UnauthorizedAccessException();
            }
        }

        [HttpPost]
        [Authorize(Roles = ""Administrator"")]
        public void Create");
            
            #line 194 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(Models.Client");
            
            #line 194 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 194 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;\r" +
                    "\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                var" +
                    " ");
            
            #line 200 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 200 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 200 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n                ");
            
            #line 202 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Add(new Entities.");
            
            #line 202 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n                {\r\n");
            
            #line 204 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {
                if (entityProperty.IsKey)
                {
                    if (entityProperty.DataType == "Guid")
                    {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 212 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = Guid.NewGuid(),\r\n");
            
            #line 213 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

                    }
                }
                else
                {
                    if (entityProperty != userPasswordField)
                    {

            
            #line default
            #line hidden
            this.Write("                    ");
            
            #line 221 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 221 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 221 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 222 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

                    }
                }
            }

            
            #line default
            #line hidden
            this.Write("                });\r\n\r\n                ");
            
            #line 229 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".SaveChanges();\r\n            }\r\n            else\r\n            {\r\n                " +
                    "throw new UnauthorizedAccessException();\r\n            }\r\n        }\r\n\r\n        /*" +
                    "\r\n        [HttpPost]\r\n        [Route(\"~/api/register\")]\r\n        public void Reg" +
                    "ister");
            
            #line 240 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(Models.Register");
            
            #line 240 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 240 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            var ");
            
            #line 242 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 242 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 242 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(";\r\n\r\n            ");
            
            #line 244 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Add(new Entities.");
            
            #line 244 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("\r\n            {\r\n");
            
            #line 246 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {
                if (entityProperty.IsKey)
                {
                    if (entityProperty.DataType == "Guid")
                    {

            
            #line default
            #line hidden
            this.Write("                ");
            
            #line 254 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = Guid.NewGuid(),\r\n");
            
            #line 255 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

                    }
                }
                else
                {

            
            #line default
            #line hidden
            this.Write("                ");
            
            #line 261 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 261 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 261 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 262 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

                }
            }

            
            #line default
            #line hidden
            this.Write("            });\r\n\r\n            ");
            
            #line 268 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".SaveChanges();\r\n        }\r\n        */\r\n\r\n        [HttpPut]\r\n        public void " +
                    "Update");
            
            #line 273 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(Models.Client");
            
            #line 273 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 273 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(")\r\n        {\r\n            var identity = this.RequestContext.Principal.Identity;\r" +
                    "\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                var" +
                    " update");
            
            #line 279 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 279 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 279 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(".Single(");
            
            #line 279 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 279 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 279 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyName));
            
            #line default
            #line hidden
            this.Write(" == ");
            
            #line 279 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 279 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyName));
            
            #line default
            #line hidden
            this.Write(");\r\n\r\n");
            
            #line 281 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

            foreach (var entityProperty in this.EntityProperties)
            {
                if (!entityProperty.IsKey && entityProperty != userPasswordField)
                {

            
            #line default
            #line hidden
            this.Write("                update");
            
            #line 287 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 287 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 287 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 287 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(entityProperty.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 288 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

                }
            }

            
            #line default
            #line hidden
            this.Write("\r\n                ");
            
            #line 293 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".SaveChanges();\r\n            }\r\n            else\r\n            {\r\n                " +
                    "throw new UnauthorizedAccessException();\r\n            }\r\n        }\r\n\r\n        [H" +
                    "ttpDelete]\r\n        public void Delete");
            
            #line 302 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 302 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyType));
            
            #line default
            #line hidden
            this.Write(" id)\r\n        {\r\n            var identity = this.RequestContext.Principal.Identit" +
                    "y;\r\n\r\n            if (identity.IsAuthenticated)\r\n            {\r\n                " +
                    "var ");
            
            #line 308 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 308 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 308 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.ContainerSet));
            
            #line default
            #line hidden
            this.Write(";\r\n                var delete");
            
            #line 309 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 309 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Single(");
            
            #line 309 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(" => ");
            
            #line 309 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(lambdaParameter));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 309 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.KeyName));
            
            #line default
            #line hidden
            this.Write(" == id);\r\n\r\n                ");
            
            #line 311 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerSetVariable));
            
            #line default
            #line hidden
            this.Write(".Remove(delete");
            
            #line 311 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(this.EntityName));
            
            #line default
            #line hidden
            this.Write(");\r\n\r\n                ");
            
            #line 313 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(containerVariable));
            
            #line default
            #line hidden
            this.Write(".SaveChanges();\r\n            }\r\n            else\r\n            {\r\n                " +
                    "throw new UnauthorizedAccessException();\r\n            }\r\n        }\r\n    }\r\n}\r\n");
            return this.GenerationEnvironment.ToString();
        }
        
        #line 1 "D:\MC\CloudIDEaaS\root\ApplicationGenerator\Generators\Server\WebAPIController\WebAPIIdentityControllerClassTemplate.tt"

private global::System.EventHandler _DebugCallbackField;

/// <summary>
/// Access the DebugCallback parameter of the template.
/// </summary>
private global::System.EventHandler DebugCallback
{
    get
    {
        return this._DebugCallbackField;
    }
}

private global::System.Collections.Generic.List<RelatedEntity> _RelatedEntitiesField;

/// <summary>
/// Access the RelatedEntities parameter of the template.
/// </summary>
private global::System.Collections.Generic.List<RelatedEntity> RelatedEntities
{
    get
    {
        return this._RelatedEntitiesField;
    }
}

private global::System.Collections.Generic.List<Generators.EntityProperty> _EntityPropertiesField;

/// <summary>
/// Access the EntityProperties parameter of the template.
/// </summary>
private global::System.Collections.Generic.List<Generators.EntityProperty> EntityProperties
{
    get
    {
        return this._EntityPropertiesField;
    }
}

private string _ControllerNameField;

/// <summary>
/// Access the ControllerName parameter of the template.
/// </summary>
private string ControllerName
{
    get
    {
        return this._ControllerNameField;
    }
}

private string _EntityNameField;

/// <summary>
/// Access the EntityName parameter of the template.
/// </summary>
private string EntityName
{
    get
    {
        return this._EntityNameField;
    }
}

private string _KeyTypeField;

/// <summary>
/// Access the KeyType parameter of the template.
/// </summary>
private string KeyType
{
    get
    {
        return this._KeyTypeField;
    }
}

private string _KeyNameField;

/// <summary>
/// Access the KeyName parameter of the template.
/// </summary>
private string KeyName
{
    get
    {
        return this._KeyNameField;
    }
}

private string _ContainerSetField;

/// <summary>
/// Access the ContainerSet parameter of the template.
/// </summary>
private string ContainerSet
{
    get
    {
        return this._ContainerSetField;
    }
}

private global::AbstraX.ServerInterfaces.IElement _ContainerField;

/// <summary>
/// Access the Container parameter of the template.
/// </summary>
private global::AbstraX.ServerInterfaces.IElement Container
{
    get
    {
        return this._ContainerField;
    }
}


/// <summary>
/// Initialize the template
/// </summary>
public override void Initialize()
{
    base.Initialize();
    if ((this.Errors.HasErrors == false))
    {
bool DebugCallbackValueAcquired = false;
if (this.Session.ContainsKey("DebugCallback"))
{
    this._DebugCallbackField = ((global::System.EventHandler)(this.Session["DebugCallback"]));
    DebugCallbackValueAcquired = true;
}
if ((DebugCallbackValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("DebugCallback");
    if ((data != null))
    {
        this._DebugCallbackField = ((global::System.EventHandler)(data));
    }
}
bool RelatedEntitiesValueAcquired = false;
if (this.Session.ContainsKey("RelatedEntities"))
{
    this._RelatedEntitiesField = ((global::System.Collections.Generic.List<RelatedEntity>)(this.Session["RelatedEntities"]));
    RelatedEntitiesValueAcquired = true;
}
if ((RelatedEntitiesValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("RelatedEntities");
    if ((data != null))
    {
        this._RelatedEntitiesField = ((global::System.Collections.Generic.List<RelatedEntity>)(data));
    }
}
bool EntityPropertiesValueAcquired = false;
if (this.Session.ContainsKey("EntityProperties"))
{
    this._EntityPropertiesField = ((global::System.Collections.Generic.List<Generators.EntityProperty>)(this.Session["EntityProperties"]));
    EntityPropertiesValueAcquired = true;
}
if ((EntityPropertiesValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("EntityProperties");
    if ((data != null))
    {
        this._EntityPropertiesField = ((global::System.Collections.Generic.List<Generators.EntityProperty>)(data));
    }
}
bool ControllerNameValueAcquired = false;
if (this.Session.ContainsKey("ControllerName"))
{
    this._ControllerNameField = ((string)(this.Session["ControllerName"]));
    ControllerNameValueAcquired = true;
}
if ((ControllerNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("ControllerName");
    if ((data != null))
    {
        this._ControllerNameField = ((string)(data));
    }
}
bool EntityNameValueAcquired = false;
if (this.Session.ContainsKey("EntityName"))
{
    this._EntityNameField = ((string)(this.Session["EntityName"]));
    EntityNameValueAcquired = true;
}
if ((EntityNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("EntityName");
    if ((data != null))
    {
        this._EntityNameField = ((string)(data));
    }
}
bool KeyTypeValueAcquired = false;
if (this.Session.ContainsKey("KeyType"))
{
    this._KeyTypeField = ((string)(this.Session["KeyType"]));
    KeyTypeValueAcquired = true;
}
if ((KeyTypeValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("KeyType");
    if ((data != null))
    {
        this._KeyTypeField = ((string)(data));
    }
}
bool KeyNameValueAcquired = false;
if (this.Session.ContainsKey("KeyName"))
{
    this._KeyNameField = ((string)(this.Session["KeyName"]));
    KeyNameValueAcquired = true;
}
if ((KeyNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("KeyName");
    if ((data != null))
    {
        this._KeyNameField = ((string)(data));
    }
}
bool ContainerSetValueAcquired = false;
if (this.Session.ContainsKey("ContainerSet"))
{
    this._ContainerSetField = ((string)(this.Session["ContainerSet"]));
    ContainerSetValueAcquired = true;
}
if ((ContainerSetValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("ContainerSet");
    if ((data != null))
    {
        this._ContainerSetField = ((string)(data));
    }
}
bool ContainerValueAcquired = false;
if (this.Session.ContainsKey("Container"))
{
    this._ContainerField = ((global::AbstraX.ServerInterfaces.IElement)(this.Session["Container"]));
    ContainerValueAcquired = true;
}
if ((ContainerValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("Container");
    if ((data != null))
    {
        this._ContainerField = ((global::AbstraX.ServerInterfaces.IElement)(data));
    }
}


    }
}


        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
}

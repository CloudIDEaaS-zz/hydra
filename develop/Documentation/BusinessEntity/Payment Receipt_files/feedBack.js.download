function loadFeedBackPlugin(){

angular.module("AZ_PORTAL")

.factory("feedBackService",function($http) {
	
	var service = this;

	service.confirm=function(feedBack){
	var req = {
		method : 'POST',
		url : 'rest/feedBack',
		headers : {
			'Content-Type' : 'application/json'
		},
	 data: feedBack

	};
	return $http(req);
	};
return service;
	
})
.controller("FeedBackCtrl",function(feedBackService,alertService,$rootScope){
	var vm=this;
	
	
	
	vm.reset=function(){
		vm.processing=false;
		//if($route.current){
		//vm.feedback={screenName:$rootScope.CURRENT_SCREEN};
	//	}
		vm.message="";
		};
	
	vm.reset();
		
	vm.confirm=function(){
		vm.processing=true;
		
		
		vm.feedback.screenName=$rootScope.CURRENT_SCREEN;
		
		console.debug(JSON.stringify(vm.feedback));
		
		feedBackService.confirm(vm.feedback).success(function(response){	
			
			vm.processing=false;
			
			if (response.status=="SUCCESS"){
				alertService.success("EMAIL SENT !",response.mainMessage);
			}
			
			if (response.status=="FAILURE"){
				alertService.success("EMAIL NOT SENT !",response.mainMessage);
			}
		
		 
		    
	})
	
	.error(function(err){
		vm.message="an error has occured please retry later";
		
		vm.processing=false;   })
	;};
	
});

}
